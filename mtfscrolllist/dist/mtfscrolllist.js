!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var s in i)("object"==typeof exports?exports:e)[s]=i[s]}}(self,(function(){return(()=>{"use strict";var e={266:(e,t,i)=>{i.r(t),i.d(t,{default:()=>l});const s=(e,t,i)=>{let s=null;return function(...o){i&&s&&(clearTimeout(s)||(s=null)),!s&&(s=setTimeout((()=>{e.apply(this,o),s=null}),t))}},o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};class n{constructor(){this.stack=[],this.height=0}isEmpty(){return 0===this.stack.length}push({ele:e,height:t}){return this.height+=t||0,this.stack.push({ele:e,height:t})}front(){return this.stack[this.stack.length-1]}pop(){const e=this.stack.pop();return this.height-=e.height||0,e}clear(){this.height=this.stack.length=0}}class h{constructor({self:e}){this.self=e,this.firstChild=null,this.lastChild=null,this.cache={top:new n,bottom:new n}}paddingTop(e){return e&&(this.self.G.ele.style.paddingTop=e+"px"),0===e?this.self.G.ele.style.removeProperty("padding-top"):e||parseInt(this.self.G.ele.style.paddingTop)||0}firstChildPaddingTop(e){this.firstChild.style.paddingTop=e+"px"}lastChildPaddingBottom(e){this.lastChild.style.paddingBottom=e+"px"}height(e){const t=e.currentStyle||window.getComputedStyle(e);return e.offsetHeight+parseInt(0|t.marginTop)+parseInt(0|t.marginBottom)}prepend(e){const t=this.firstChild.nextSibling,i=document.createDocumentFragment();e.forEach((e=>i.appendChild(this.self.G.render({data:e,index:this.self.G.startIndex++})))),this.self.G.ele.insertBefore(i,t)}prependFromCache(){const e=this.cache.top.pop();if(e){const t=this.firstChild.nextSibling,i=document.createDocumentFragment();e.ele.forEach((e=>i.appendChild(e))),this.self.G.ele.insertBefore(i,t),this.firstChildPaddingTop(this.cache.top.height)}}append(e){const t=document.createDocumentFragment();e.forEach((e=>t.appendChild(this.self.G.render({data:e,index:this.self.G.startIndex++})))),this.self.G.ele.insertBefore(t,this.lastChild)}appendFromCache(){const e=this.cache.bottom.pop();if(e){const t=document.createDocumentFragment();e.ele.forEach((e=>t.appendChild(e))),this.self.G.ele.insertBefore(t,this.lastChild),this.lastChildPaddingBottom(this.cache.bottom.height)}}clearTop(){if(this.self.G.ele.children.length-2>this.self.G.perPage){const e=Array(this.self.G.perPage);let t=-1,i=0;for(;++t<this.self.G.perPage;)i+=this.height(e[t]=this.self.G.ele.children[1]),this.self.G.ele.removeChild(e[t]);this.cache.top.push({ele:e,height:i}),this.firstChildPaddingTop(this.cache.top.height)}}clearBottom(){let e=this.self.G.ele.children.length-2-this.self.G.perPage;if(e>0){const t=Array(e);let i=0;for(;e--;)i+=this.height(t[e]=this.self.G.ele.children[this.self.G.ele.children.length-2]),this.self.G.ele.removeChild(t[e]);this.cache.bottom.push({ele:t,height:i}),this.lastChildPaddingBottom(this.cache.bottom.height)}}init(){this.self.G.ele.innerHTML="",this.firstChild=document.createElement("div"),this.lastChild=document.createElement("div"),this.firstChild.style.height=this.lastChild.style.height="1px",this.self.G.ele.appendChild(this.firstChild),this.self.G.ele.appendChild(this.lastChild)}clear(){let e=this.self.G.ele.children.length-1;for(;e-- >1;)this.self.G.ele.removeChild(this.self.G.ele.children[this.self.G.ele.children.length-2]);this.firstChildPaddingTop(0),this.lastChildPaddingBottom(0),this.cache.top.clear(),this.cache.bottom.clear()}}class l{constructor(){this.G=Object.create(null),this.Dom=new h({self:this})}init({ele:e=null,data:t=[],render:i=(()=>document.createElement("div")),perPage:s=t.length,onTop:o=(()=>{}),onBottom:n=(()=>{}),onPullDownStart:h=(()=>{}),onPullDownMove:l=(()=>{}),onPullDownEnd:r=(()=>{})}){this.G={ele:e,render:i,startIndex:0,perPage:s,onTop:o,onBottom:n,onPullDownStart:h,onPullDownMove:l,onPullDownEnd:r},this.Dom.init(),this.refresh({data:t}),this.scrollListener(),this.pullDownListener()}scrollListener(){const e=()=>{const e=this;if(this.Dom.cache.top.isEmpty()){if(this.G.startIndex%this.G.perPage>0)return;this.G.onTop({cb(t){t&&(e.Dom.clearBottom(),e.Dom.prepend(t))},page:this.G.startIndex/this.G.perPage+1})}else this.Dom.clearBottom(),this.Dom.prependFromCache()},t=()=>{const e=this;if(this.Dom.cache.bottom.isEmpty()){if(this.G.startIndex%this.G.perPage>0)return;this.G.onBottom({cb(t){t&&(e.Dom.clearTop(),e.Dom.append(t))},page:this.G.startIndex/this.G.perPage+1})}else this.Dom.clearTop(),this.Dom.appendFromCache()},i=()=>{const i=this.G.ele.getBoundingClientRect(),s=this.Dom.firstChild.getBoundingClientRect(),o=this.Dom.lastChild.getBoundingClientRect();s.bottom>i.top&&e(),o.top<i.bottom&&t()},o=()=>{const e=this.Dom.firstChild.offsetHeight,t=this.Dom.lastChild.offsetTop+1;(e>1&&this.G.ele.scrollTop<e||t>1&&t>this.G.ele.offsetHeight&&this.G.ele.scrollTop+this.G.ele.offsetHeight>t)&&(i(),o())};if("undefined"==typeof IntersectionObserver)this.G.ele.addEventListener("scroll",s(i,1e3/60));else{const i=new window.IntersectionObserver((i=>{1===i.length&&i[0].isIntersecting&&(i[0].target===this.Dom.firstChild?e():t())}),{root:this.G.ele,threshold:0});i.observe(this.Dom.firstChild),i.observe(this.Dom.lastChild)}this.G.ele.addEventListener("scroll",s(o,150,!0))}refresh({data:e,perPage:t}){this.G.startIndex=0,this.Dom.clear(),t&&(this.G.perPage=t),e&&this.Dom.append(e)}pullDownListener(){const e=e=>e.targetTouches?e.targetTouches[0].clientY:e.clientY,t="ontouchend"in document;let i=!1,s=0;const n=t=>{const o=e(t)-s;o>0&&(!1===i&&(this.G.onPullDownStart({startY:s}),i=!0),void 0===this.G.onPullDownMove({paddingTop:o})&&this.Dom.paddingTop(o))},h=()=>{const e=this;this.G.ele.removeEventListener(t?"touchmove":"mousemove",n),document.removeEventListener(t?"touchend":"mouseup",h);let s=this.Dom.paddingTop();this.G.onPullDownEnd({paddingTop:s,cb(t){e.refresh({data:t})}});const l=()=>{const e=Math.max(5,s/10);s>e?(this.Dom.paddingTop(s-=e),o(l)):(this.Dom.paddingTop(0),i=!1)};o(l)};this.G.ele.addEventListener(t?"touchstart":"mousedown",(i=>{this.G.ele.scrollTop||(s=e(i),this.G.ele.addEventListener(t?"touchmove":"mousemove",n),document.addEventListener(t?"touchend":"mouseup",h))}))}}}},t={};function i(s){if(t[s])return t[s].exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}return i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(266)})()}));